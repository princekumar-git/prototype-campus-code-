<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Faculty - Community Forum</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: { sans: ["Poppins", "sans-serif"] },
            colors: {
              primary: { 50: "#E7F0FA", 100: "#D0E1F5", 200: "#7BA4D0", 300: "#4D84C0", 400: "#2E5E99", 500: "#1E4A7A", 600: "#0D2440" },
              dark: { bg: "#111827", card: "#1F2937", text: "#F9FAFB", border: "#374151" },
            },
            animation: {
                fadeIn: 'fadeIn 0.3s ease-out',
            },
            keyframes: {
                fadeIn: {
                    '0%': { opacity: '0', transform: 'translateY(10px)' },
                    '100%': { opacity: '1', transform: 'translateY(0)' },
                }
            }
          },
        },
      };
    </script>
    <style>
      /* --- Global Styles --- */
      ::-webkit-scrollbar { width: 6px; height: 6px; }
      ::-webkit-scrollbar-track { background: transparent; }
      .dark ::-webkit-scrollbar-track { background: #111827; }
      ::-webkit-scrollbar-thumb { background: #7ba4d0; border-radius: 3px; }
      ::-webkit-scrollbar-thumb:hover { background: #2e5e99; }

      /* --- Sidebar Specifics --- */
      .sidebar { transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; }
    
      .nav-item {
        transition: all 0.2s ease; position: relative; display: flex; align-items: center; 
        padding: 0.75rem 1rem; margin-bottom: 0.25rem; color: #374151; border-radius: 0.5rem; cursor: pointer; white-space: nowrap;
      }
      .dark .nav-item { color: #d1d5db; }
      .nav-item:hover { background-color: #f3f4f6; }
      .dark .nav-item:hover { background-color: #374151; }
      .nav-item.active { background-color: #d0e1f5; color: #1e4a7a; }
      .dark .nav-item.active { background-color: #1e4a7a; color: #ffffff; }

      .nav-item.active::before {
        content: ""; position: absolute; left: 0; top: 50%; transform: translateY(-50%);
        height: 60%; width: 4px; background-color: #2e5e99; border-radius: 0 4px 4px 0;
      }
      .dark .nav-item.active::before { background-color: #60a5fa; }

      .nav-item i { width: 1.5rem; text-align: center; margin-right: 0.75rem; font-size: 1.1rem; flex-shrink: 0; }
      .nav-item span { font-size: 0.875rem; font-weight: 500; }

      /* Collapsed Sidebar overrides */
      .sidebar.collapsed .nav-item { justify-content: center; padding-left: 0; padding-right: 0; }
      .sidebar.collapsed .nav-item i { margin-right: 0; font-size: 1.25rem; }
      .sidebar.collapsed .nav-item span { display: none; }

      .topic-card { cursor: pointer; transition: all 0.2s ease; }
      .topic-card:hover .topic-icon { transform: scale(1.1); }
      
      /* Selected Topic State */
      .topic-card.selected { 
          border-color: #3b82f6; 
          background-color: #eff6ff; 
          box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1), 0 2px 4px -1px rgba(59, 130, 246, 0.06);
      }
      .dark .topic-card.selected { 
          border-color: #3b82f6; 
          background-color: rgba(30, 58, 138, 0.2); 
      }

      .post-card:hover { transform: translateY(-2px); }
      
      .filter-btn.active {
          background-color: #e7f0fa;
          color: #1e4a7a;
          border-color: #7ba4d0;
      }
      .dark .filter-btn.active {
          background-color: #1e4a7a;
          color: #ffffff;
          border-color: #60a5fa;
      }
    </style>
  </head>

  <body class="bg-primary-50 dark:bg-gray-900 min-h-screen font-sans transition-colors duration-200">
    <div class="flex h-screen overflow-hidden">
      
        <aside id="mainSidebar" class="sidebar w-64 bg-white dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 flex flex-col h-screen flex-shrink-0 transition-all duration-300 z-50">

    <div class="p-6 flex-shrink-0 flex items-center justify-between h-[88px]">
        <h1 class="text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2 overflow-hidden whitespace-nowrap">
            <i class="fas fa-code text-primary-500 text-2xl flex-shrink-0"></i>
            <span id="sidebarLogoText" class="transition-all duration-300 opacity-100">CampusCode</span>
        </h1>
        <button id="sidebarToggleBtn" class="p-1.5 rounded-lg text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary-500 transition-colors focus:outline-none">
            <i class="fas fa-chevron-left transition-transform duration-300"></i>
        </button>
    </div>

    <nav class="flex-1 space-y-1 overflow-y-auto mt-2 font-sans">
        
        <a href="dashboard.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all border-r-4 border-transparent">
    <i class="fas fa-home w-5 text-center text-lg"></i>
    <span class="whitespace-nowrap">Dashboard</span>
</a>

        <a href="problem.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all border-r-4 border-transparent">
            <i class="fas fa-tasks w-5 text-center text-lg group-hover:scale-110 transition-transform"></i>
            <span class="whitespace-nowrap">Problems</span>
        </a>

        <a href="contest.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all border-r-4 border-transparent">
            <i class="fas fa-trophy w-5 text-center text-lg"></i>
            <span class="whitespace-nowrap">Contests</span>
        </a>

        <a href="faculty.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all border-r-4 border-transparent">
            <i class="fas fa-users w-5 text-center text-lg group-hover:scale-110 transition-transform"></i>
            <span class="whitespace-nowrap">Faculty</span>
        </a>

        <a href="student.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all border-r-4 border-transparent">
            <i class="fas fa-users w-5 text-center text-lg group-hover:scale-110 transition-transform"></i>
            <span class="whitespace-nowrap">Students</span>
        </a>

        <a href="community.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 border-r-4 border-primary-600 dark:border-primary-400 transition-all">
            <i class="fas fa-comments w-5 text-center text-lg group-hover:scale-110 transition-transform"></i>
            <span class="whitespace-nowrap">Community</span>
        </a>

        <a href="report.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all border-r-4 border-transparent">
            <i class="fas fa-chart-pie w-5 text-center text-lg group-hover:scale-110 transition-transform"></i>
            <span class="whitespace-nowrap">Reports</span>
        </a>

    </nav>

    <div class="p-4 space-y-1 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex-shrink-0">
        
        <a href="help.html" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all rounded-lg">
            <i class="far fa-question-circle w-5 text-center text-lg group-hover:scale-110 transition-transform"></i>
            <span class="whitespace-nowrap">Help & Support</span>
        </a>

        <div id="settingsTrigger" class="group flex items-center gap-3 px-6 py-3.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all rounded-lg cursor-pointer">
            <i class="fas fa-cog w-5 text-center text-lg group-hover:rotate-90 transition-transform duration-500"></i>
            <span class="whitespace-nowrap">Settings</span>
        </div>

    </div>
</aside>

      <div class="flex-1 overflow-y-auto">
        <header class="bg-white dark:bg-gray-800 shadow-sm transition-colors duration-200 sticky top-0 z-40">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <div class="flex-1 max-w-2xl ml-4 flex items-center gap-4">
                <h1 id="headerLogoText" class="text-xl font-bold text-gray-800 dark:text-white hidden transition-all duration-300 opacity-0 transform -translate-x-2 whitespace-nowrap">
                    CampusCode
                </h1>
              <div class="relative w-full">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fas fa-search text-gray-400"></i>
                </div>
                <input type="text" id="globalSearch" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500" placeholder="Search..." />
              </div>
            </div>
            <div class="ml-4 flex items-center gap-3">
              <button id="themeToggleBtn" class="p-2 rounded-full text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none transition-transform active:scale-95">
                <i class="fas fa-moon text-xl"></i>
              </button>
              <div class="relative">
                <button id="notificationBtn" class="relative p-2 rounded-full text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none">
                  <i class="fas fa-bell text-xl"></i>
                  <span class="absolute top-0 right-0 h-2 w-2 rounded-full bg-red-500 border-2 border-white dark:border-gray-800"></span>
                </button>
              </div>
              <button id="headerProfileBtn" class="ml-2 flex items-center gap-3 p-1 pr-3 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <div class="h-9 w-9 rounded-full bg-primary-500 flex items-center justify-center text-white font-bold text-sm">JD</div>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-200 hidden sm:block">John Doe</span>
              </button>
            </div>
          </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
          <div class="mb-6 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-primary-600 dark:text-white">
              Community Forum
            </h1>
          </div>

          <div class="mb-8 bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-primary-100 dark:border-gray-700">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
              <div class="relative flex-1 max-w-2xl">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fas fa-search text-primary-300 dark:text-gray-500"></i>
                </div>
                <input type="text" id="forumSearch" class="block w-full pl-10 pr-3 py-2 border border-primary-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400" placeholder="Search discussions by title or content..." />
              </div>
              <div class="flex flex-wrap gap-2" id="filterContainer">
                <button data-filter="all" class="filter-btn active px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm font-medium">
                  All Types
                </button>
                <button data-filter="recent" class="filter-btn px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm font-medium">
                  Most Recent
                </button>
                <button data-filter="active" class="filter-btn px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm font-medium">
                  Most Active
                </button>
                <button data-filter="unanswered" class="filter-btn px-4 py-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors text-sm font-medium">
                  Unanswered
                </button>
              </div>
            </div>
          </div>

          <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-primary-600 dark:text-white">Browse by Topic</h2>
                <button id="clearTopicBtn" class="text-sm text-primary-500 hover:text-primary-700 hidden">Clear Filter</button>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
              
              <div class="topic-card selected bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-primary-100 dark:border-gray-700 hover:shadow-md flex flex-col items-center justify-center text-center h-full" data-topic="all">
                <div class="w-12 h-12 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-3">
                  <i class="fas fa-layer-group text-gray-600 dark:text-gray-300 text-xl topic-icon transition-transform"></i>
                </div>
                <h3 class="font-semibold text-primary-700 dark:text-gray-200 mb-1">All Topics</h3>
                <p class="text-xs text-primary-400 dark:text-gray-500">View everything</p>
              </div>

              <div class="topic-card bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-primary-100 dark:border-gray-700 hover:shadow-md" data-topic="web">
                <div class="w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-4">
                  <i class="fas fa-code text-blue-500 dark:text-blue-400 text-xl topic-icon transition-transform"></i>
                </div>
                <h3 class="font-semibold text-primary-700 dark:text-gray-200 mb-2">Web Development</h3>
                <p class="text-sm text-primary-500 dark:text-gray-400">HTML, CSS, JS</p>
              </div>

              <div class="topic-card bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-primary-100 dark:border-gray-700 hover:shadow-md" data-topic="backend">
                <div class="w-12 h-12 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-4">
                  <i class="fas fa-server text-green-500 dark:text-green-400 text-xl topic-icon transition-transform"></i>
                </div>
                <h3 class="font-semibold text-primary-700 dark:text-gray-200 mb-2">Backend</h3>
                <p class="text-sm text-primary-500 dark:text-gray-400">Node, Python, DB</p>
              </div>

              <div class="topic-card bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-primary-100 dark:border-gray-700 hover:shadow-md" data-topic="mobile">
                <div class="w-12 h-12 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center mb-4">
                  <i class="fas fa-mobile-alt text-purple-500 dark:text-purple-400 text-xl topic-icon transition-transform"></i>
                </div>
                <h3 class="font-semibold text-primary-700 dark:text-gray-200 mb-2">Mobile Dev</h3>
                <p class="text-sm text-primary-500 dark:text-gray-400">iOS, Android</p>
              </div>

              <div class="topic-card bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-primary-100 dark:border-gray-700 hover:shadow-md" data-topic="algo">
                <div class="w-12 h-12 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center mb-4">
                  <i class="fas fa-brain text-yellow-500 dark:text-yellow-400 text-xl topic-icon transition-transform"></i>
                </div>
                <h3 class="font-semibold text-primary-700 dark:text-gray-200 mb-2">Algorithms</h3>
                <p class="text-sm text-primary-500 dark:text-gray-400">DSA, Logic</p>
              </div>
            </div>
          </div>

          <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-xl font-semibold text-primary-600 dark:text-white" id="postsTitle">Recent Discussions</h2>
              <div class="flex items-center space-x-2">
                <span class="text-sm text-primary-500 dark:text-gray-400">Sort by:</span>
                <select id="sortSelect" class="border-0 bg-transparent text-primary-600 dark:text-blue-400 font-medium focus:ring-0 focus:outline-none text-sm dark:bg-gray-900 cursor-pointer">
                  <option value="recent">Most Recent</option>
                  <option value="viewed">Most Viewed</option>
                  <option value="commented">Most Comments</option>
                </select>
              </div>
            </div>

            <div class="space-y-4" id="postsContainer">
              
              <div class="post-card bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-primary-100 dark:border-gray-700 hover:shadow-md transition-all mb-4" 
                   data-category="web" data-date="2023-10-27T10:00:00" data-views="245" data-comments="14" data-solved="true">
                <div class="p-6">
                  <div class="flex flex-col md:flex-row md:items-start">
                    <div class="flex-1">
                      <div class="flex items-center space-x-3 mb-2">
                        <span class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300">Web Development</span>
                        <span class="text-sm text-primary-500 dark:text-gray-400"><i class="far fa-user mr-1"></i> Sarah Johnson</span>
                        <span class="text-sm text-primary-400 dark:text-gray-500"><i class="far fa-clock mr-1"></i> 2 hours ago</span>
                      </div>
                      
                      <h3 class="text-lg font-semibold text-primary-700 dark:text-gray-200 mb-2 cursor-pointer">
                        How to optimize React performance with large lists?
                      </h3>
                      <p class="text-primary-500 dark:text-gray-400 mb-4">
                        I'm working on a project with thousands of items in a list. What are the best practices for optimizing performance in React when dealing with large datasets?
                      </p>

                      <div class="flex flex-wrap items-center gap-4 text-sm border-t border-gray-100 dark:border-gray-700 pt-4">
                        <div class="flex items-center gap-3">
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-comment-alt mr-1"></i> <span class="comment-count">14</span> comments</span>
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-eye mr-1"></i> 245 views</span>
                        </div>
                        <div class="flex-1"></div>
                        <button class="btn-toggle-reply px-4 py-1.5 bg-primary-50 text-primary-600 hover:bg-primary-100 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors">
                          <i class="fas fa-reply mr-1"></i> Answer
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="reply-section hidden bg-gray-50 dark:bg-gray-700/30 p-4 border-t border-gray-100 dark:border-gray-700">
                    <div class="flex gap-3">
                        <div class="w-8 h-8 rounded-full bg-primary-500 flex-shrink-0 flex items-center justify-center text-white font-bold text-xs">JD</div>
                        <div class="flex-1">
                            <textarea class="reply-input w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-400 focus:outline-none text-sm dark:text-white" rows="3" placeholder="Write an official faculty response..."></textarea>
                            <div class="flex justify-end gap-2 mt-2">
                                <button class="btn-cancel-reply text-gray-500 hover:text-gray-700 dark:text-gray-400 text-sm px-3 py-1.5 font-medium">Cancel</button>
                                <button class="btn-submit-reply bg-primary-600 hover:bg-primary-700 text-white text-sm px-4 py-1.5 rounded-lg font-medium shadow-sm transition-colors">Post Answer</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="faculty-answers-container"></div>
              </div>

              <div class="post-card bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-primary-100 dark:border-gray-700 hover:shadow-md transition-all mb-4" 
                   data-category="algo" data-date="2023-10-27T05:00:00" data-views="189" data-comments="8" data-solved="false">
                <div class="p-6">
                  <div class="flex flex-col md:flex-row md:items-start">
                    <div class="flex-1">
                      <div class="flex items-center space-x-3 mb-2">
                        <span class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300">Algorithms</span>
                        <span class="text-sm text-primary-500 dark:text-gray-400"><i class="far fa-user mr-1"></i> Alex Chen</span>
                        <span class="text-sm text-primary-400 dark:text-gray-500"><i class="far fa-clock mr-1"></i> 5 hours ago</span>
                      </div>
                      <h3 class="text-lg font-semibold text-primary-700 dark:text-gray-200 mb-2 cursor-pointer">
                        Understanding Time Complexity in Graph Algorithms
                      </h3>
                      <p class="text-primary-500 dark:text-gray-400 mb-4">
                        Can someone explain why Dijkstra's algorithm has a time complexity of O((V+E)logV) with a min-heap? I'm having trouble understanding the logV part.
                      </p>
                      <div class="flex flex-wrap items-center gap-4 text-sm border-t border-gray-100 dark:border-gray-700 pt-4">
                        <div class="flex items-center gap-3">
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-comment-alt mr-1"></i> <span class="comment-count">8</span> comments</span>
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-eye mr-1"></i> 189 views</span>
                        </div>
                        <div class="flex-1"></div>
                        <button class="btn-toggle-reply px-4 py-1.5 bg-primary-50 text-primary-600 hover:bg-primary-100 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors">
                          <i class="fas fa-reply mr-1"></i> Answer
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="reply-section hidden bg-gray-50 dark:bg-gray-700/30 p-4 border-t border-gray-100 dark:border-gray-700">
                    <div class="flex gap-3">
                        <div class="w-8 h-8 rounded-full bg-primary-500 flex-shrink-0 flex items-center justify-center text-white font-bold text-xs">JD</div>
                        <div class="flex-1">
                            <textarea class="reply-input w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-400 focus:outline-none text-sm dark:text-white" rows="3" placeholder="Write an official faculty response..."></textarea>
                            <div class="flex justify-end gap-2 mt-2">
                                <button class="btn-cancel-reply text-gray-500 hover:text-gray-700 dark:text-gray-400 text-sm px-3 py-1.5 font-medium">Cancel</button>
                                <button class="btn-submit-reply bg-primary-600 hover:bg-primary-700 text-white text-sm px-4 py-1.5 rounded-lg font-medium shadow-sm transition-colors">Post Answer</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="faculty-answers-container"></div>
              </div>

              <div class="post-card bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-primary-100 dark:border-gray-700 hover:shadow-md transition-all mb-4" 
                   data-category="backend" data-date="2023-10-26T20:00:00" data-views="56" data-comments="0" data-solved="false">
                <div class="p-6">
                  <div class="flex flex-col md:flex-row md:items-start">
                    <div class="flex-1">
                      <div class="flex items-center space-x-3 mb-2">
                        <span class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300">Backend</span>
                        <span class="text-sm text-primary-500 dark:text-gray-400"><i class="far fa-user mr-1"></i> Jordan Lee</span>
                        <span class="text-sm text-primary-400 dark:text-gray-500"><i class="far fa-clock mr-1"></i> 1 day ago</span>
                      </div>
                      <h3 class="text-lg font-semibold text-primary-700 dark:text-gray-200 mb-2 cursor-pointer">
                        Docker container networking issues
                      </h3>
                      <p class="text-primary-500 dark:text-gray-400 mb-4">
                        My Node.js service cannot communicate with the MongoDB container even though they are on the same bridge network. Any ideas?
                      </p>
                      <div class="flex flex-wrap items-center gap-4 text-sm border-t border-gray-100 dark:border-gray-700 pt-4">
                        <div class="flex items-center gap-3">
                           <span class="flex items-center text-gray-400 dark:text-gray-500"><i class="far fa-comment-alt mr-1"></i> <span class="comment-count">0</span> comments</span>
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-eye mr-1"></i> 56 views</span>
                        </div>
                        <div class="flex-1"></div>
                        <button class="btn-toggle-reply px-4 py-1.5 bg-primary-50 text-primary-600 hover:bg-primary-100 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors">
                          <i class="fas fa-reply mr-1"></i> Answer
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="reply-section hidden bg-gray-50 dark:bg-gray-700/30 p-4 border-t border-gray-100 dark:border-gray-700">
                    <div class="flex gap-3">
                        <div class="w-8 h-8 rounded-full bg-primary-500 flex-shrink-0 flex items-center justify-center text-white font-bold text-xs">JD</div>
                        <div class="flex-1">
                            <textarea class="reply-input w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-400 focus:outline-none text-sm dark:text-white" rows="3" placeholder="Write an official faculty response..."></textarea>
                            <div class="flex justify-end gap-2 mt-2">
                                <button class="btn-cancel-reply text-gray-500 hover:text-gray-700 dark:text-gray-400 text-sm px-3 py-1.5 font-medium">Cancel</button>
                                <button class="btn-submit-reply bg-primary-600 hover:bg-primary-700 text-white text-sm px-4 py-1.5 rounded-lg font-medium shadow-sm transition-colors">Post Answer</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="faculty-answers-container"></div>
              </div>

              <div class="post-card bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-primary-100 dark:border-gray-700 hover:shadow-md transition-all mb-4" 
                   data-category="mobile" data-date="2023-10-25T15:00:00" data-views="120" data-comments="5" data-solved="true">
                <div class="p-6">
                  <div class="flex flex-col md:flex-row md:items-start">
                    <div class="flex-1">
                      <div class="flex items-center space-x-3 mb-2">
                        <span class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300">Mobile Development</span>
                        <span class="text-sm text-primary-500 dark:text-gray-400"><i class="far fa-user mr-1"></i> Casey Smith</span>
                        <span class="text-sm text-primary-400 dark:text-gray-500"><i class="far fa-clock mr-1"></i> 2 days ago</span>
                      </div>
                      <h3 class="text-lg font-semibold text-primary-700 dark:text-gray-200 mb-2 cursor-pointer">
                        Flutter vs React Native in 2024
                      </h3>
                      <p class="text-primary-500 dark:text-gray-400 mb-4">
                        Starting a new cross-platform project. Which framework is currently offering better performance and developer experience?
                      </p>
                      <div class="flex flex-wrap items-center gap-4 text-sm border-t border-gray-100 dark:border-gray-700 pt-4">
                        <div class="flex items-center gap-3">
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-comment-alt mr-1"></i> <span class="comment-count">5</span> comments</span>
                           <span class="flex items-center text-primary-500 dark:text-gray-400"><i class="far fa-eye mr-1"></i> 120 views</span>
                        </div>
                        <div class="flex-1"></div>
                        <button class="btn-toggle-reply px-4 py-1.5 bg-primary-50 text-primary-600 hover:bg-primary-100 dark:bg-gray-700 dark:text-blue-400 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors">
                          <i class="fas fa-reply mr-1"></i> Answer
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="reply-section hidden bg-gray-50 dark:bg-gray-700/30 p-4 border-t border-gray-100 dark:border-gray-700">
                    <div class="flex gap-3">
                        <div class="w-8 h-8 rounded-full bg-primary-500 flex-shrink-0 flex items-center justify-center text-white font-bold text-xs">JD</div>
                        <div class="flex-1">
                            <textarea class="reply-input w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-400 focus:outline-none text-sm dark:text-white" rows="3" placeholder="Write an official faculty response..."></textarea>
                            <div class="flex justify-end gap-2 mt-2">
                                <button class="btn-cancel-reply text-gray-500 hover:text-gray-700 dark:text-gray-400 text-sm px-3 py-1.5 font-medium">Cancel</button>
                                <button class="btn-submit-reply bg-primary-600 hover:bg-primary-700 text-white text-sm px-4 py-1.5 rounded-lg font-medium shadow-sm transition-colors">Post Answer</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="faculty-answers-container"></div>
              </div>

            </div>
          </div>

          <div class="flex items-center justify-between mt-8 mb-4">
            <button class="px-4 py-2 border border-primary-200 dark:border-gray-700 rounded-lg text-primary-600 dark:text-gray-300 hover:bg-primary-50 dark:hover:bg-gray-700 disabled:opacity-50" disabled>Previous</button>
            <div class="flex items-center space-x-1">
              <button class="w-10 h-10 rounded-lg bg-primary-500 text-white">1</button>
              <button class="w-10 h-10 rounded-lg text-primary-600 dark:text-gray-300 hover:bg-primary-50 dark:hover:bg-gray-700">2</button>
              <span class="px-2 text-gray-500 dark:text-gray-400">...</span>
              <button class="w-10 h-10 rounded-lg text-primary-600 dark:text-gray-300 hover:bg-primary-50 dark:hover:bg-gray-700">5</button>
            </div>
            <button class="px-4 py-2 border border-primary-200 dark:border-gray-700 rounded-lg text-primary-600 dark:text-gray-300 hover:bg-primary-50 dark:hover:bg-gray-700">Next</button>
          </div>
        </main>
      </div>
    </div>

    <div id="profileOverlay" class="fixed inset-0 z-[80] flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="w-[380px] bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden animate-[fadeIn_0.2s_ease-out]">
            <div class="bg-gradient-to-br from-[#1E4A7A] to-[#153255] relative pt-12 pb-20 px-6 text-center">
                <button id="closeProfileOverlay" class="absolute top-4 right-4 w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white/90 transition-all flex items-center justify-center backdrop-blur-sm">
                    <i class="fas fa-times text-sm"></i>
                </button>
                <div class="absolute left-1/2 bottom-[-48px] -translate-x-1/2">
                    <div class="relative w-24 h-24 rounded-full p-1.5 bg-white dark:bg-gray-800 ring-4 ring-[#1E4A7A]/10 dark:ring-[#1E4A7A]/30">
                        <div class="w-full h-full rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-inner">
                            JD
                        </div>
                        <div class="absolute bottom-0 right-0 w-6 h-6 bg-green-500 border-4 border-white dark:border-gray-800 rounded-full"></div>
                    </div>
                </div>
            </div>
            <div class="pt-16 pb-8 px-6">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-1">Dr. John Doe</h2>
                    <p class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-3">Senior Professor & Researcher</p>
                    <div class="flex items-center justify-center gap-2 flex-wrap">
                        <span class="px-3 py-1 rounded-full text-xs font-semibold bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-100 dark:border-blue-800">CSE Dept</span>
                        <span class="px-3 py-1 rounded-full text-xs font-semibold bg-purple-50 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 border border-purple-100 dark:border-purple-800">HOD</span>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="p-3 rounded-2xl bg-gray-50 dark:bg-gray-700/30 border border-gray-100 dark:border-gray-700 text-center">
                         <p class="text-xs text-gray-500 uppercase font-semibold">Faculty ID</p>
                         <p class="text-sm font-bold text-gray-800 dark:text-gray-200">FAC-2023</p>
                    </div>
                    <div class="p-3 rounded-2xl bg-gray-50 dark:bg-gray-700/30 border border-gray-100 dark:border-gray-700 text-center">
                        <p class="text-xs text-gray-500 uppercase font-semibold">Joined</p>
                        <p class="text-sm font-bold text-gray-800 dark:text-gray-200">Aug 2015</p>
                   </div>
                </div>
                <div class="space-y-3">
                      <button id="logoutBtn" class="w-full flex items-center justify-between p-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 group transition-all duration-200 border border-transparent hover:border-red-100 dark:hover:border-red-800">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 flex items-center justify-center">
                                <i class="fas fa-sign-out-alt text-sm"></i>
                            </div>
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-200 group-hover:text-red-600 dark:group-hover:text-red-400">Logout</span>
                        </div>
                        <i class="fas fa-chevron-right text-xs text-gray-400 group-hover:text-red-500 dark:group-hover:text-red-400"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="settingsMenu" class="hidden fixed bottom-16 left-4 w-72 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 shadow-2xl rounded-2xl z-[9999] overflow-hidden transform transition-all duration-200 origin-bottom-left">
        <div class="p-2 space-y-1">
            <div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">Account</div>
            <a href="profile.html" class="flex items-center gap-3 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-colors cursor-pointer group">
                <i class="fas fa-user-circle w-5 text-gray-400 group-hover:text-primary-500 transition-colors"></i>
                Profile
            </a>
        </div>
        <div class="h-px bg-gray-100 dark:bg-gray-700 mx-4"></div>
        <div class="p-2 space-y-1">
            <div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">Preferences</div>
            <button id="themeAccordionBtn" class="w-full flex justify-between items-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-xl transition-colors cursor-pointer group focus:outline-none">
                <div class="flex items-center gap-3">
                    <i class="fas fa-palette w-5 text-gray-400 group-hover:text-primary-500 transition-colors"></i>
                    <span>Theme</span>
                </div>
                <i id="themeChevron" class="fas fa-chevron-right text-xs text-gray-400 transition-transform duration-200"></i>
            </button>
            <div id="themeOptionsContainer" class="hidden pl-4 pr-1 space-y-1 pb-1">
                <button data-value="light" class="theme-option w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors">
                    <span class="flex items-center gap-2"><i class="fas fa-sun text-orange-400 w-4"></i> Light</span>
                    <i class="fas fa-check text-primary-500 opacity-0 check-icon"></i>
                </button>
                <button data-value="dark" class="theme-option w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors">
                    <span class="flex items-center gap-2"><i class="fas fa-moon text-indigo-400 w-4"></i> Dark</span>
                    <i class="fas fa-check text-primary-500 opacity-0 check-icon"></i>
                </button>
                <button data-value="system" class="theme-option w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors">
                    <span class="flex items-center gap-2"><i class="fas fa-desktop text-gray-400 w-4"></i> System</span>
                    <i class="fas fa-check text-primary-500 opacity-0 check-icon"></i>
                </button>
            </div>
        </div>
    </div>

     <div id="notificationDropdown" class="fixed top-16 right-6 z-[70] w-80 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 hidden animate-[fadeIn_0.1s_ease-out]">
        <div class="p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center">
            <h3 class="font-semibold text-gray-800 dark:text-white">Notifications</h3>
            <span class="text-xs text-primary-500 cursor-pointer hover:underline">Mark all read</span>
        </div>
        <div class="p-2">
            <div class="p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg cursor-pointer">
                <p class="text-sm text-gray-800 dark:text-gray-200 font-medium">System Update</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">Server maintenance scheduled for tonight.</p>
            </div>
             <div class="p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg cursor-pointer">
                <p class="text-sm text-gray-800 dark:text-gray-200 font-medium">New Student Enrollment</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">5 new students joined CS101.</p>
            </div>
        </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        
        // --- 1. SIDEBAR & THEME LOGIC ---
        const sidebar = document.getElementById('mainSidebar');
        const toggleBtn = document.getElementById('sidebarToggleBtn');
        const toggleIcon = toggleBtn ? toggleBtn.querySelector('i') : null;
        const sidebarLogoText = document.getElementById('sidebarLogoText');
        const headerLogoText = document.getElementById('headerLogoText');

        if (toggleBtn && sidebar) {
            toggleBtn.addEventListener('click', () => {
                sidebar.classList.toggle('collapsed');
                if (sidebar.classList.contains('collapsed')) {
                    sidebar.classList.replace('w-64', 'w-20');
                    if(toggleIcon) toggleIcon.style.transform = 'rotate(180deg)';
                    if(sidebarLogoText) { sidebarLogoText.style.opacity = '0'; sidebarLogoText.style.width = '0px'; }
                    if(headerLogoText) { headerLogoText.classList.remove('hidden'); setTimeout(() => { headerLogoText.classList.remove('opacity-0', '-translate-x-2'); }, 50); }
                } else {
                    sidebar.classList.replace('w-20', 'w-64');
                    if(toggleIcon) toggleIcon.style.transform = 'rotate(0deg)';
                    if(sidebarLogoText) { sidebarLogoText.style.opacity = '1'; sidebarLogoText.style.width = 'auto'; }
                    if(headerLogoText) { headerLogoText.classList.add('opacity-0', '-translate-x-2'); setTimeout(() => { headerLogoText.classList.add('hidden'); }, 300); }
                }
            });
        }

        // Settings & Theme
        const settingsTrigger = document.getElementById('settingsTrigger');
        const settingsMenu = document.getElementById('settingsMenu');
        const themeAccordionBtn = document.getElementById('themeAccordionBtn');
        const themeOptionsContainer = document.getElementById('themeOptionsContainer');
        const themeChevron = document.getElementById('themeChevron');
        const themeOptions = document.querySelectorAll('.theme-option');
        const headerThemeBtn = document.getElementById('themeToggleBtn');
        const headerThemeIcon = headerThemeBtn ? headerThemeBtn.querySelector('i') : null;

        function applyTheme(themeName) {
            const html = document.documentElement;
            if (themeName === 'dark') { html.classList.add('dark'); localStorage.theme = 'dark'; }
            else if (themeName === 'light') { html.classList.remove('dark'); localStorage.theme = 'light'; }
            else { localStorage.removeItem('theme'); if (window.matchMedia('(prefers-color-scheme: dark)').matches) html.classList.add('dark'); else html.classList.remove('dark'); }
            
            if (headerThemeIcon) { 
                if (html.classList.contains('dark')) headerThemeIcon.classList.replace('fa-moon', 'fa-sun'); 
                else headerThemeIcon.classList.replace('fa-sun', 'fa-moon'); 
            }
            
            themeOptions.forEach(btn => {
                const checkIcon = btn.querySelector('.check-icon');
                const isSelected = btn.getAttribute('data-value') === themeName;
                if (isSelected) { btn.classList.add('bg-primary-50', 'dark:bg-primary-900/20', 'text-primary-600', 'dark:text-primary-400'); checkIcon.classList.remove('opacity-0'); }
                else { btn.classList.remove('bg-primary-50', 'dark:bg-primary-900/20', 'text-primary-600', 'dark:text-primary-400'); checkIcon.classList.add('opacity-0'); }
            });
        }

        if (settingsTrigger && settingsMenu) {
            settingsTrigger.addEventListener('click', (e) => { e.stopPropagation(); settingsMenu.classList.toggle('hidden'); if (sidebar && sidebar.classList.contains('collapsed')) settingsMenu.style.left = '80px'; else settingsMenu.style.left = '16px'; });
            document.addEventListener('click', (e) => { if (!settingsMenu.contains(e.target) && !settingsTrigger.contains(e.target)) settingsMenu.classList.add('hidden'); });
        }
        if (themeAccordionBtn && themeOptionsContainer) {
            themeAccordionBtn.addEventListener('click', (e) => { e.stopPropagation(); themeOptionsContainer.classList.toggle('hidden'); themeChevron.style.transform = themeOptionsContainer.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(90deg)'; });
        }
        themeOptions.forEach(option => { option.addEventListener('click', (e) => { e.stopPropagation(); applyTheme(option.getAttribute('data-value')); }); });
        if (headerThemeBtn) { headerThemeBtn.addEventListener('click', () => { const isDark = document.documentElement.classList.contains('dark'); applyTheme(isDark ? 'light' : 'dark'); }); }
        applyTheme(localStorage.theme || 'system');

        // Overlays
        const overlay = document.getElementById("profileOverlay");
        const headerProfileBtn = document.getElementById("headerProfileBtn");
        const closeBtn = document.getElementById("closeProfileOverlay");
        if(headerProfileBtn && overlay) headerProfileBtn.addEventListener("click", () => overlay.classList.remove("hidden"));
        if(closeBtn && overlay) closeBtn.addEventListener("click", () => overlay.classList.add("hidden"));
        if(overlay) overlay.addEventListener("click", (e) => { if (e.target === overlay) overlay.classList.add("hidden"); });
        const notifBtn = document.getElementById('notificationBtn');
        const notifDropdown = document.getElementById('notificationDropdown');
        if (notifBtn && notifDropdown) {
            notifBtn.addEventListener('click', (e) => { e.stopPropagation(); notifDropdown.classList.toggle('hidden'); });
            document.addEventListener('click', (e) => { if(!notifDropdown.contains(e.target) && !notifBtn.contains(e.target)) notifDropdown.classList.add('hidden'); });
        }
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) { logoutBtn.addEventListener('click', () => { window.location.href = '../../index.html'; }); }


        // --- 2. FACULTY REPLY LOGIC (NEW) ---
        const replyButtons = document.querySelectorAll('.btn-toggle-reply');

        replyButtons.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const card = e.target.closest('.post-card');
                const replySection = card.querySelector('.reply-section');
                const textarea = replySection.querySelector('textarea');
                
                // Toggle visibility
                replySection.classList.toggle('hidden');
                
                if (!replySection.classList.contains('hidden')) {
                    textarea.focus();
                    btn.innerHTML = '<i class="fas fa-times mr-1"></i> Close';
                } else {
                    btn.innerHTML = '<i class="fas fa-reply mr-1"></i> Answer';
                }
            });
        });

        // Handle Cancel Buttons
        document.querySelectorAll('.btn-cancel-reply').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const card = e.target.closest('.post-card');
                const replySection = card.querySelector('.reply-section');
                const toggleBtn = card.querySelector('.btn-toggle-reply');
                
                replySection.classList.add('hidden');
                toggleBtn.innerHTML = '<i class="fas fa-reply mr-1"></i> Answer';
            });
        });

        // Handle Submit Buttons
        document.querySelectorAll('.btn-submit-reply').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const card = e.target.closest('.post-card');
                const textarea = card.querySelector('.reply-input');
                const container = card.querySelector('.faculty-answers-container');
                const replySection = card.querySelector('.reply-section');
                const toggleBtn = card.querySelector('.btn-toggle-reply');
                const commentCountSpan = card.querySelector('.comment-count');
                
                const text = textarea.value.trim();
                
                if (text) {
                    // Create the new answer HTML with Faculty Badge
                    const answerHTML = `
                        <div class="p-4 bg-blue-50/50 dark:bg-blue-900/10 border-t border-blue-100 dark:border-blue-900/30 animate-fadeIn">
                            <div class="flex gap-3">
                                <div class="relative">
                                    <div class="w-8 h-8 rounded-full bg-primary-500 flex items-center justify-center text-white font-bold text-xs shadow-sm">JD</div>
                                    <div class="absolute -bottom-1 -right-1 bg-green-500 text-white text-[8px] px-1 rounded-full border border-white dark:border-gray-800">
                                        <i class="fas fa-check"></i>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm font-bold text-primary-700 dark:text-blue-300">
                                            Dr. John Doe 
                                            <span class="ml-2 text-[10px] uppercase tracking-wider bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300 px-1.5 py-0.5 rounded border border-primary-200 dark:border-primary-700">Faculty</span>
                                        </span>
                                        <span class="text-xs text-gray-500">Just now</span>
                                    </div>
                                    <p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed">${text}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Append and Reset
                    container.insertAdjacentHTML('beforeend', answerHTML);
                    textarea.value = '';
                    replySection.classList.add('hidden');
                    toggleBtn.innerHTML = '<i class="fas fa-reply mr-1"></i> Answer';
                    
                    // Update Comment Count visually
                    if(commentCountSpan) {
                        let count = parseInt(commentCountSpan.innerText);
                        commentCountSpan.innerText = count + 1;
                    }
                }
            });
        });


        // --- 3. FILTER & SEARCH LOGIC ---
        const filterBtns = document.querySelectorAll('.filter-btn');
        const topicCards = document.querySelectorAll(".topic-card");
        const postsContainer = document.getElementById('postsContainer');
        const posts = Array.from(document.querySelectorAll('.post-card'));
        const searchInput = document.getElementById('forumSearch');
        const sortSelect = document.getElementById('sortSelect');
        const postsTitle = document.getElementById('postsTitle');
        const clearTopicBtn = document.getElementById('clearTopicBtn');

        let activeTopic = 'all';
        let activeFilter = 'all';
        let searchQuery = '';

        function applyFilters() {
            let visibleCount = 0;
            posts.forEach(post => {
                const category = post.getAttribute('data-category');
                const isSolved = post.getAttribute('data-solved') === 'true';
                const comments = parseInt(post.getAttribute('data-comments'));
                const views = parseInt(post.getAttribute('data-views'));
                
                const title = post.querySelector('h3').textContent.toLowerCase();
                const content = post.querySelector('p').textContent.toLowerCase();
                const matchesSearch = title.includes(searchQuery) || content.includes(searchQuery);
                const matchesTopic = activeTopic === 'all' || category === activeTopic;

                let matchesTab = true;
                if (activeFilter === 'unanswered') matchesTab = comments === 0;
                else if (activeFilter === 'active') matchesTab = views > 100;

                if (matchesSearch && matchesTopic && matchesTab) {
                    post.style.display = 'block';
                    visibleCount++;
                } else {
                    post.style.display = 'none';
                }
            });

            if (activeTopic !== 'all') {
                const topicName = document.querySelector(`.topic-card[data-topic="${activeTopic}"] h3`).textContent;
                postsTitle.textContent = `${topicName} Discussions`;
                clearTopicBtn.classList.remove('hidden');
            } else {
                postsTitle.textContent = "Recent Discussions";
                clearTopicBtn.classList.add('hidden');
            }
        }

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                activeFilter = btn.getAttribute('data-filter');
                applyFilters();
            });
        });

        topicCards.forEach((card) => {
            card.addEventListener("click", () => {
                const topic = card.getAttribute('data-topic');
                if (topic === 'all') {
                    activeTopic = 'all';
                    topicCards.forEach(c => c.classList.remove("selected", "ring-2", "ring-primary-400"));
                    card.classList.add("selected", "ring-2", "ring-primary-400");
                } else if (activeTopic === topic) {
                    activeTopic = 'all';
                    card.classList.remove("selected", "ring-2", "ring-primary-400");
                    document.querySelector('.topic-card[data-topic="all"]').classList.add("selected", "ring-2", "ring-primary-400");
                } else {
                    activeTopic = topic;
                    topicCards.forEach(c => c.classList.remove("selected", "ring-2", "ring-primary-400"));
                    card.classList.add("selected", "ring-2", "ring-primary-400");
                }
                applyFilters();
            });
        });

        clearTopicBtn.addEventListener('click', () => {
            activeTopic = 'all';
            topicCards.forEach(c => c.classList.remove("selected", "ring-2", "ring-primary-400"));
            document.querySelector('.topic-card[data-topic="all"]').classList.add("selected", "ring-2", "ring-primary-400");
            applyFilters();
        });

        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value.toLowerCase();
            applyFilters();
        });

        sortSelect.addEventListener('change', () => {
            postsContainer.style.opacity = '0.5';
            setTimeout(() => { postsContainer.style.opacity = '1'; }, 200);
        });

      });
    </script>
  </body>
</html>