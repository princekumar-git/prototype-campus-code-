<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CampusCode â€¢ Admin Profile</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Poppins', 'sans-serif'] },
          colors: {
            primary: { 50: '#E7F0FA', 200: '#7BA4D0', 400: '#2E5E99', 500: '#2E5E99', 600: '#0D2440' }
          }
        }
      }
    }
  </script>
  <style>
  /* --- Sidebar Logic --- */
.sidebar { transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
.sidebar.collapsed { width: 5rem; }
.sidebar.collapsed .nav-item { justify-content: center; padding-left: 0; padding-right: 0; }
.sidebar.collapsed .nav-item i { margin-right: 0; font-size: 1.25rem; }
.sidebar.collapsed .nav-item span, 
.sidebar.collapsed .logo-text, 
.sidebar.collapsed .bottom-menu span { display: none; }

/* Adjust nav-item for consistency */
.nav-item i { width: 1.5rem; text-align: center; margin-right: 0.75rem; flex-shrink: 0; }
  
    /* Custom Styles */
    .nav-item { display: flex; align-items: center; padding: 0.6rem 1rem; border-radius: 0.5rem; color: #64748b; transition: all 0.2s; cursor: pointer;}
    .nav-item:hover { background-color: #f3f4f6; color: #2E5E99; }
    .nav-item.active { background-color: #E7F0FA; color: #2E5E99; font-weight: 600; }
    .dark .nav-item { color: #94a3b8; }
    .dark .nav-item.active { background-color: #2E5E99; color: white; }
    
    body { transition: background-color 0.3s, color 0.3s; }
    .glass-card { background: white; border: 1px solid #e5e7eb; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
    .dark .glass-card { background: #1f2937; border-color: #374151; }
    
    .modal-overlay { background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(6px); transition: opacity 0.3s ease; }
    .img-controls { opacity: 0; transform: translateY(10px); transition: all 0.3s ease; }
    .group:hover .img-controls { opacity: 1; transform: translateY(0); }
    
    /* Notification Panel Animation */
    #notificationPanel { 
        display: none; 
        transform-origin: top right;
    }
    #notificationPanel.active { display: block; animation: slideIn 0.2s ease-out; }
    @keyframes slideIn {
        from { opacity: 0; transform: scale(0.95) translateY(-10px); }
        to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .profile-modal-overlay { display: none; }
    .profile-modal-overlay.active { display: flex !important; }
  </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 font-sans overflow-hidden">

<div class="flex h-screen">
  <aside id="mainSidebar" class="sidebar w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col h-screen flex-shrink-0 z-50">
    <div class="p-6 flex-shrink-0 flex items-center justify-between h-[88px]">
        <h1 class="text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2 overflow-hidden whitespace-nowrap">
            <i class="fas fa-code text-primary-500 text-2xl flex-shrink-0"></i>
            <span class="logo-text transition-all duration-300 opacity-100 w-auto">CampusCode</span>
        </h1>
        <button id="sidebarToggleBtn" class="p-1.5 rounded-lg text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary-500 transition-colors focus:outline-none">
            <i class="fas fa-chevron-left transition-transform duration-300"></i>
        </button>
    </div>

    <nav class="flex-1 px-4 space-y-1 overflow-y-auto">
        <a href="dashboard.html" class="nav-item"><i class="fas fa-home"></i><span>Home</span></a>
        <a href="program.html" class="nav-item"><i class="fa-solid fa-layer-group"></i><span>Programs</span></a>
        <a href="contest.html" class="nav-item"><i class="fas fa-trophy"></i><span>Contests</span></a>
        <a href="events.html" class="nav-item"><i class="fa-solid fa-calendar-check"></i><span>Events</span></a>
        <a href="manage_user.html" class="nav-item"><i class="fa-solid fa-users"></i><span>User</span></a>
        <a href="update-report.html" class="nav-item"><i class="fas fa-file-invoice"></i><span>Reports</span></a>
        <button onclick="toggleProfileOverlay()" class="nav-item active w-full text-left">
            <i class="fas fa-user"></i><span>Profile</span>
        </button>
    </nav>

    <div class="p-4 space-y-1 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex-shrink-0 bottom-menu">
        <a href="help_support.html" class="nav-item"><i class="far fa-question-circle"></i><span>Help & Support</span></a>
        <a href="setting.html" class="nav-item"><i class="fas fa-cog"></i><span>Settings</span></a>
    </div>
</aside>
  <div class="flex-1 flex flex-col">
    <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-8 py-4 flex justify-end items-center gap-8 relative">
      
      <button onclick="toggleTheme()" class="text-gray-500 dark:text-gray-400 hover:text-gray-800 transition-colors">
        <i id="themeIcon" class="fas fa-moon text-xl"></i>
      </button>

      <div class="relative">
        <div id="bellBtn" onclick="toggleNotifications(event)" class="relative cursor-pointer text-gray-500 dark:text-gray-400 hover:text-gray-800 transition-colors">
            <i class="fas fa-bell text-xl"></i>
            <span id="notifBadge" class="absolute -top-1 -right-0.5 w-2.5 h-2.5 bg-red-500 border-2 border-white dark:border-gray-800 rounded-full"></span>
        </div>

        <div id="notificationPanel" class="absolute right-0 mt-6 w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border dark:border-gray-700 z-[120] overflow-hidden">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                <h4 class="font-bold text-gray-800 dark:text-white">Notifications</h4>
                <button onclick="clearNotif(event)" class="text-[10px] text-primary-500 font-bold uppercase hover:text-primary-600">Clear all</button>
            </div>
            <div id="notificationList" class="max-h-80 overflow-y-auto">
                <div class="p-4 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                    <p class="text-xs font-bold dark:text-gray-200">New Contest Request</p>
                    <p class="text-[11px] text-gray-500 mt-0.5">Python Basics Contest needs approval.</p>
                </div>
                <div class="p-4 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                    <p class="text-xs font-bold dark:text-gray-200">System Update</p>
                    <p class="text-[11px] text-gray-500 mt-0.5">Platform maintenance scheduled for tonight.</p>
                </div>
            </div>
        </div>
      </div>

      <div class="flex items-center gap-3 cursor-pointer group" onclick="toggleProfileOverlay()">
        <div class="w-10 h-10 rounded-full bg-[#2E4B77] flex items-center justify-center text-white font-bold text-sm shadow-sm group-hover:opacity-90">
          RK
        </div>
        <span id="headerName" class="text-[#334155] dark:text-gray-200 font-semibold text-lg">Raj Kumar</span>
      </div>
    </header>

    <main class="flex-1 px-8 py-6 overflow-y-auto">
      <div class="grid grid-cols-12 gap-6">
        
        <div class="col-span-12 lg:col-span-3 glass-card rounded-3xl p-6 flex flex-col items-center">
          <div class="relative group">
            <div class="w-32 h-32 rounded-3xl border-4 border-primary-50 dark:border-gray-700 shadow-xl overflow-hidden bg-gray-100">
                <img id="mainAvatar" class="w-full h-full object-cover" src="https://ui-avatars.com/api/?name=Raj+Kumar&background=2E5E99&color=fff" />
            </div>
            <div class="img-controls absolute -bottom-2 flex gap-2 left-1/2 -translate-x-1/2">
                <button onclick="document.getElementById('profileUpload').click()" class="bg-primary-500 text-white w-8 h-8 rounded-lg flex items-center justify-center hover:scale-110"><i class="fas fa-pencil-alt text-xs"></i></button>
                <button onclick="removeProfilePic()" class="bg-red-500 text-white w-8 h-8 rounded-lg flex items-center justify-center hover:scale-110"><i class="fas fa-trash-alt text-xs"></i></button>
            </div>
            <input type="file" id="profileUpload" class="hidden" accept="image/*" onchange="previewImage(event)">
          </div>
          
          <h2 id="displayName" class="mt-8 text-xl font-bold dark:text-white">Raj Kumar</h2>
          <p id="displayDesig" class="text-xs font-semibold text-gray-400 uppercase tracking-widest mt-1">Dean of Academics</p>

          <div class="mt-8 w-full space-y-4 border-t border-gray-100 dark:border-gray-700 pt-6">
            <div class="flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400"><i class="fas fa-university text-primary-400 w-5"></i><span id="displayInst">XYZ Institute of Tech</span></div>
            <div class="flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400"><i class="fas fa-envelope text-primary-400 w-5"></i><span>admin@xyz.edu</span></div>
          </div>

          <div class="mt-10 w-full space-y-3">
            <button onclick="toggleModal('editModal')" class="w-full py-3 rounded-2xl bg-primary-500 text-white font-bold text-xs shadow-lg hover:bg-primary-600">EDIT PROFILE</button>
            <button onclick="toggleModal('collegeModal')" class="w-full py-3 rounded-2xl border border-gray-200 dark:border-gray-700 dark:text-gray-300 font-bold text-xs hover:bg-gray-50 dark:hover:bg-gray-700">MANAGE COLLEGE</button>
          </div>
        </div>

        <div class="col-span-12 lg:col-span-9 flex flex-col gap-6">
          <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6">
            <div class="glass-card rounded-[2rem] p-6 flex items-center gap-4">
                <div class="p-3 rounded-2xl bg-blue-50 dark:bg-blue-900/20 text-blue-600"><i class="fas fa-user-graduate text-xl"></i></div>
                <div><p class="text-xs font-bold text-gray-400 uppercase">Students</p><p class="text-2xl font-black dark:text-white">2,340</p></div>
            </div>
            <div class="glass-card rounded-[2rem] p-6 flex items-center gap-4">
                <div class="p-3 rounded-2xl bg-purple-50 dark:bg-purple-900/20 text-purple-600"><i class="fas fa-chalkboard-teacher text-xl"></i></div>
                <div><p class="text-xs font-bold text-gray-400 uppercase">Faculty</p><p class="text-2xl font-black dark:text-white">148</p></div>
            </div>
            <div class="glass-card rounded-[2rem] p-6 flex items-center gap-4">
                <div class="p-3 rounded-2xl bg-green-50 dark:bg-green-900/20 text-green-600"><i class="fas fa-code-branch text-xl"></i></div>
                <div><p class="text-xs font-bold text-gray-400 uppercase">Programs</p><p class="text-2xl font-black dark:text-white">12</p></div>
            </div>
            <div class="glass-card rounded-[2rem] p-6 flex items-center gap-4">
                <div class="p-3 rounded-2xl bg-orange-50 dark:bg-orange-900/20 text-orange-600"><i class="fas fa-bolt text-xl"></i></div>
                <div><p class="text-xs font-bold text-gray-400 uppercase">Contests</p><p class="text-2xl font-black dark:text-white">5</p></div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[400px]">
            <div class="glass-card rounded-[2.5rem] p-8 flex flex-col">
                <h3 class="font-bold text-gray-800 dark:text-white mb-6">Platform Usage</h3>
                <div class="relative flex-1"><canvas id="usageChart"></canvas></div>
            </div>
            <div class="glass-card rounded-[2.5rem] p-8 flex flex-col">
                <h3 class="font-bold text-gray-800 dark:text-white mb-6">Performance Matrix</h3>
                <div class="relative flex-1"><canvas id="performanceChart"></canvas></div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<div id="profileOverlay" class="hidden fixed inset-0 z-[150] profile-modal-overlay flex items-center justify-center p-4">
    <div class="bg-white dark:bg-gray-800 rounded-[2rem] w-full max-w-[340px] shadow-2xl overflow-hidden relative border dark:border-gray-700">
        <button onclick="toggleProfileOverlay()" class="absolute top-4 right-4 text-white hover:text-gray-200 z-10"><i class="fas fa-times text-lg"></i></button>
        <div class="h-32 bg-[#2E4B77] w-full"></div>
        <div class="relative -mt-12 flex justify-center mb-3">
            <div class="w-24 h-24 rounded-full bg-[#2E4B77] border-[4px] border-white dark:border-gray-800 flex items-center justify-center shadow-md">
                <span class="text-3xl font-bold text-white">RK</span>
            </div>
        </div>
        <div class="text-center px-6 pb-8">
            <h2 class="text-xl font-bold text-gray-800 dark:text-white" id="overlayName">Raj Kumar</h2>
            <p class="text-xs text-gray-400">Dean of Academics</p>
            <p class="text-xs text-gray-500 flex items-center justify-center gap-1"><i class="fas fa-university"></i> XYZ Institute of Technology</p>
                <p class="text-xs text-gray-500 mb-3 flex items-center justify-center gap-1">ID: Faculty_001</p>

                <div class="flex justify-between border-y border-gray-100 dark:border-gray-700 py-4 mb-6">
                    <div><p class="text-[10px] font-bold text-primary-400 uppercase">Contest</p><p class="text-lg font-bold dark:text-white">124</p></div>
                    <div class="border-x border-gray-100 dark:border-gray-700 px-6"><p class="text-[10px] font-bold text-primary-400 uppercase">Requests</p><p class="text-lg font-bold dark:text-white">42</p></div>
                    <div><p class="text-[10px] font-bold text-primary-400 uppercase">Reports</p><p class="text-lg font-bold dark:text-white">1.2k</p></div>
                </div>
                <div class="space-y-1">
<a href="profile.html">   <button class="w-full flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group">
                        <div class="flex items-center gap-3"><i class="fas fa-user-circle text-primary-400"></i><span class="text-sm font-medium text-gray-700 dark:text-gray-200"> Profile</span></div>
                        <i class="fas fa-chevron-right text-[10px] text-gray-400 group-hover:translate-x-1 transition-transform"></i>
                    </button></a>
                    
                  <a href="help_support.html">  <button class="w-full flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group">
                        <div class="flex items-center gap-3"><i class="fas fa-question-circle text-primary-400"></i><span class="text-sm font-medium text-gray-700 dark:text-gray-200">Help & Support</span></div>
                        <i class="fas fa-chevron-right text-[10px] text-gray-400 group-hover:translate-x-1 transition-transform"></i>
                    </button></a>

            <button onclick="handleLogout()" class="mt-6 flex items-center justify-center gap-3 w-full py-3 rounded-xl bg-red-50 text-red-500 font-bold text-sm hover:bg-red-100 transition-colors">
                <i class="fas fa-sign-out-alt"></i> Log out
            </button>
        </div>
    </div>
</div>

<div id="editModal" class="hidden fixed inset-0 z-[140] modal-overlay flex items-center justify-center p-4">
    <div class="bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md p-8 shadow-2xl">
        <h3 class="text-xl font-bold dark:text-white mb-6">Update Profile</h3>
        <label class="text-[10px] font-bold text-gray-400 uppercase">Full Name</label>
        <input type="text" id="inputName" value="Raj Kumar" class="w-full mb-4 px-4 py-2 rounded-xl border dark:bg-gray-900 dark:border-gray-700 dark:text-white outline-none">
        <div class="flex gap-3 mt-4">
            <button onclick="toggleModal('editModal')" class="flex-1 py-3 border rounded-xl dark:text-white">Cancel</button>
            <button onclick="saveProfile()" class="flex-1 py-3 bg-primary-500 text-white rounded-xl">Save Changes</button>
        </div>
    </div>
</div>

<script>
  // NOTIFICATION LOGIC (FIXED)
  function toggleNotifications(event) {
    event.stopPropagation();
    const panel = document.getElementById('notificationPanel');
    panel.classList.toggle('active');
  }

  function clearNotif(event) {
    event.stopPropagation();
    // Hide Badge
    document.getElementById('notifBadge').style.display = 'none';
    // Clear Content
    document.getElementById('notificationList').innerHTML = `
        <div class="p-10 text-center">
            <i class="fas fa-bell-slash text-gray-200 dark:text-gray-700 text-4xl mb-3"></i>
            <p class="text-xs text-gray-400">No new notifications</p>
        </div>
    `;
  }

  // THEME TOGGLE
  function toggleTheme() {
    const html = document.documentElement;
    const icon = document.getElementById('themeIcon');
    if (html.classList.contains('dark')) {
      html.classList.remove('dark');
      icon.classList.replace('fa-sun', 'fa-moon');
    } else {
      html.classList.add('dark');
      icon.classList.replace('fa-moon', 'fa-sun');
    }
  }

  // UI HELPERS
  function toggleModal(id) { document.getElementById(id).classList.toggle('hidden'); }
  function toggleProfileOverlay() { 
      const overlay = document.getElementById('profileOverlay');
      overlay.classList.toggle('hidden'); 
      overlay.classList.toggle('active'); 
  }

  function saveProfile() {
      const name = document.getElementById('inputName').value;
      document.getElementById('displayName').innerText = name;
      document.getElementById('headerName').innerText = name;
      document.getElementById('overlayName').innerText = name;
      toggleModal('editModal');
  }

  function previewImage(event) {
      const reader = new FileReader();
      reader.onload = function(){ document.getElementById('mainAvatar').src = reader.result; };
      if(event.target.files[0]) reader.readAsDataURL(event.target.files[0]);
  }

  function handleLogout() { if(confirm("Log out?")) window.location.href = "login.html"; }

  // CLOSE DROPDOWNS ON OUTSIDE CLICK
  window.addEventListener('click', function(e) {
    const panel = document.getElementById('notificationPanel');
    const bell = document.getElementById('bellBtn');
    if (panel && !panel.contains(e.target) && !bell.contains(e.target)) {
        panel.classList.remove('active');
    }
  });

  // CHARTS INITIALIZATION
  new Chart(document.getElementById('usageChart').getContext('2d'), {
    type: 'line',
    data: {
      labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
      datasets: [{ data: [320, 410, 380, 500, 620, 560, 590], borderColor: '#2E5E99', borderWidth: 3, tension: 0.4, fill: true, backgroundColor: 'rgba(46, 94, 153, 0.1)' }]
    },
    options: { maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { display: false }, x: { grid: { display: false } } } }
  });

  new Chart(document.getElementById('performanceChart'), {
    type: 'doughnut',
    data: { labels: ['Excellent','Average', 'At Risk'], datasets: [{ data: [45, 40, 15], backgroundColor: ['#10B981','#F59E0B','#EF4444'], borderWidth: 0 }] },
    options: { maintainAspectRatio: false, cutout: '80%', plugins: { legend: { position: 'bottom' } } }
  });
  
  
  // side navbar LOGIC
  // SIDEBAR TOGGLE LOGIC
const sidebar = document.getElementById('mainSidebar');
const sidebarToggleBtn = document.getElementById('sidebarToggleBtn');
const toggleIcon = sidebarToggleBtn.querySelector('i');

sidebarToggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');
    if (sidebar.classList.contains('collapsed')) {
        toggleIcon.classList.replace('fa-chevron-left', 'fa-chevron-right');
    } else {
        toggleIcon.classList.replace('fa-chevron-right', 'fa-chevron-left');
    }
});
</script>
</body>
</html>